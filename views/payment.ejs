<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment - Canvas Couture</title>
    <link rel="stylesheet" href="/css/paymentStyle.css">
    <script>
        function validateForm(event) {
            // Prevent form submission for validation
            event.preventDefault();

            // Get form values
            const address = document.getElementById("address").value;
            const cardName = document.getElementById("cardName").value;
            const cardNumber = document.getElementById("cardNumber").value;
            const expiryDate = document.getElementById("expiryDate").value;
            const cvv = document.getElementById("cvv").value;

            // Regular expressions for validation
            const cardNumberPattern = /^\d{16}$/; // 16 digits
            const expiryDatePattern = /^(0[1-9]|1[0-2])\/\d{2}$/; // MM/YY format
            const cvvPattern = /^\d{3}$/; // 3 digits

            // Validation flags
            let isValid = true;

            // Address validation
            if (address.trim() === "") {
                alert("Address is required.");
                isValid = false;
            }

            // Name validation
            if (cardName.trim() === "") {
                alert("Name on Card is required.");
                isValid = false;
            }

            // Card Number validation
            if (!cardNumberPattern.test(cardNumber)) {
                alert("Card Number must be 16 digits.");
                isValid = false;
            }

            // Expiry Date validation
            if (!expiryDatePattern.test(expiryDate)) {
                alert("Expiration Date must be in MM/YY format.");
                isValid = false;
            }

            // CVV validation
            if (!cvvPattern.test(cvv)) {
                alert("CVV must be 3 digits.");
                isValid = false;
            }

            // Submit the form if all validations pass
            if (isValid) {
                document.querySelector("form").submit();
            }
        }
    </script>
</head>

<body>
    <div class="container">
        <h1>Complete Your Purchase</h1>

        <form action="/payment/checkout" method="POST" onsubmit="validateForm(event)">
            <!-- Shipping Address -->
            <h2>Shipping Information</h2>
            <label for="address">Address</label>
            <input type="text" id="address" name="address" required placeholder="Enter your address">

            <!-- Payment Information -->
            <h2>Payment Details</h2>
            <label for="cardName">Name on Card</label>
            <input type="text" id="cardName" name="cardName" required
                placeholder="Enter name as it appears on the card">

            <label for="cardNumber">Card Number</label>
            <input type="text" id="cardNumber" name="cardNumber" required placeholder="Enter your card number"
                pattern="\d{16}" title="Card number must be 16 digits.">

            <div class="flex-row">
                <div>
                    <label for="expiryDate">Expiration Date</label>
                    <input type="text" id="expiryDate" name="expiryDate" required placeholder="MM/YY"
                        pattern="(0[1-9]|1[0-2])\/\d{2}" title="Expiration date must be in MM/YY format.">
                </div>
                <div>
                    <label for="cvv">CVV</label>
                    <input type="text" id="cvv" name="cvv" required placeholder="CVV" pattern="\d{3}"
                        title="CVV must be 3 digits.">
                </div>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn-submit">Submit Payment</button>
        </form>
    </div>
</body>

</html>